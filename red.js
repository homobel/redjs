

//	RedJS library v. 0.8

//	by: Archy Sharp
//	see https://github.com/homobel/redjs for details


(function(a){if(!a.indexOf){a.indexOf=function(b){for(var a=0,c=this.length;a<c;a++)if(a in this&&this[a]===b)return a;return -1};a.lastIndexOf=function(b){for(var a=this.length-1;a>=0;a--)if(a in this&&this[a]===b)return a;return -1};a.forEach=function(c,b){for(var a=0,d=this.length;a<d;a++)a in this&&c.call(b,this[a],a,this)};a.map=function(d,c){for(var b=new Array(this.length),a=0,e=this.length;a<e;a++)if(a in this)b[a]=d.call(c,this[a],a,this);return b};a.filter=function(d,c){for(var b=[],a=0,e=this.length;a<e;a++)a in this&&d.call(c,this[a],a,this)&&b.push(this[a]);return b};a.every=function(c,b){for(var a=0,d=this.length;a<d;a++)if(a in this&&!c.call(b,this[a],a,this))return false;return true};a.some=function(c,b){for(var a=0,d=this.length;a<d;a++)if(a in this&&c.call(b,this[a],a,this))return true;return false}}a.forEachInvert=function(c,b){for(var a=this.length;a--;)a in this&&c.call(b,this[a],a,this)};a.copy=function(){return this.slice(0)};a.del=function(a){a in this&&this.splice(a,1);return this};a.linear=function(){var b=[];function a(c){if(c instanceof Array)c.forEach(a);else b.push(c)}a(this);return b};a.pushOnce=function(b){var a=this.indexOf(b);if(!~a){this.push(b);return this.length-1}return a};a.toggle=function(b){var a=this.indexOf(b);if(a==-1)this.push(b);else this.del(a);return a}})(Array.prototype);(function(a){a.isMail=function(){return !!~this.search(/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/)};a.hasWord=function(a){if(this.search("\\b"+a+"\\b")==-1)return false;return true};a.camelCase=function(){return this.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})};a.toInt=function(a){return parseInt(this,a||10)};a.toFloat=function(){return parseFloat(this)};function b(a){if(a.length===1)a+=a;return a.toInt(16).limit(0,255)}a.getColors=function(){var a;if(this.charAt(0)=="#")if(this.length==4)a=this.match(/\w/g).map(b);else a=this.match(/\w{2}/g).map(b);else{a=this.match(/\d{1,3}/g);if(a)a=a.map(function(a){return a.toInt().limit(0,255)})}return a||[]};a.toRgb=function(){var a=this.getColors();if(a[0]&&a[1]&&a[2])return "rgb("+a.join(",")+")";return false};a.toHex=function(){var a=this.getColors();if(a[0]&&a[1]&&a[2])return "#"+a.map(function(b){var a=b.toString(16);return a.length===1?0+a:a}).join("");return false}})(String.prototype);(function(a){a.limit=function(b,a){if(a===undefined)return this;var d=Math.min(b,a),c=Math.max(b,a);return Math.min(c,Math.max(d,this))};a.toInt=function(a){return parseInt(this,a||10)};a.toFloat=function(){return parseFloat(this)};a.random=function(){return (this*Math.random()).toInt()}})(Number.prototype);(function(b){var j=function(a,b){return new i(a,b)},a=j,e=("redjs"+Math.random()).replace("0.",""),d,g=document,f=a.ielt9;a.hash=e;a.proto={};function i(b,a){this.ns=h(b,a);this.length=this.ns.length}i.prototype=a.proto;a.multi=function(){for(var c=a(),b=0,d=arguments.length;b<d;b++)c.include(arguments[b]);return c};a.extend=function(b){if(typeof b=="object")for(var c in b)if(b.hasOwnProperty(c))a.proto[c]=b[c]};(function(){var b={},c=navigator.userAgent.toLowerCase();if(~c.search(/firefox/))b.firefox=true;else if(~c.search(/msie/))b.msie=true;else if(~c.search(/opera/))b.opera=true;else if(~c.search(/chrome/))b.chrome=true;else if(~c.search(/safari/))b.safari=true;a.browser=b;a.ielt9="\13"=="v"})();(function(){function e(a){this.val=a}function b(a){switch(typeof a){case "undefined":return b["undefined"];case "boolean":return b["boolean"];case "number":return b["number"];case "string":return b["string"];case "function":if(a.call)return b["function"];case "object":if(a instanceof i)return b["redjs"];else if(a===null)return b["null"];else if(a instanceof Array)return b["array"];else if(a.nodeName&&a.nodeType!==undefined)return b["node"];else if(a.length!==undefined)return b["nodelist"];else if(Object.prototype.toString.call(a)=="[object Object]")return b["object"]}return b["unknown"]}e.prototype={toString:function(){return c[this.val]},is:function(a){return c[this.val]==a}};var c=["undefined","boolean","number","string","function","node","nodelist","array","object","null","redjs","unknown"];c.forEach(function(a,b){this[a]=new e(b);this[b]=a},b);d=a.type=b})();a.isEmptyObj=function(a){for(var b in a)if(a.hasOwnProperty(b))return false;return true};a.joinObj=function(){for(var c={},a=0;a<arguments.length;a++)if(arguments[a])for(var b in arguments[a])if(arguments[a].hasOwnProperty(b))c[b]=arguments[a][b];return c};function c(a){var b=d(a);if(b.is("array"))return a;else if(b.is("nodelist")){for(var c=[],e=0,g=a.length;e<g;e++)c.push(a[e]);return c}else if(b.is("object")){var c=[];for(var f in a)a.hasOwnProperty(f)&&c.push(a[f]);return c}else if(b.is("redjs"))return a.ns;else if(b.is("undefined")||b.is("null")||b.is("unknown"))return [];else return [a]}a.toArray=function(){var d=arguments.length;if(d>1){for(var b=[],a=0;a<d;a++)b=b.concat(c(arguments[a]));return b}else return c(arguments[0])};a.id=function(a){return g.getElementById(a)};a.tag=function(a,b){return (b||g).getElementsByTagName(a)};a.className=function(){if(document.getElementsByClassName)return function(a,b){return (b||document).getElementsByClassName(a)};else return function(g,j){if(g){var d=a.tag("*",j),e=g.split(/\s+/),i=e.length,f=[],b,h,c;for(b=0,h=d.length;b<h;b++)for(c=0;c<i;c++)if(d[b].className.hasWord(e[c])){f.push(d[b]);break}return f}else throw Error("Not enough arguments")}}();function m(b){return c(a.id(b))}function l(b,d){return c(a.tag(b,d))}function k(b,d){return c(a.className(b,d))}function h(b,e){if(b===undefined||b==="")return [];var j=!!e,o=d(b);if(j){var q=d(b);if(q.is("string"))e=h(e);else e=c(e)}if(o.is("string")){var i=b.charAt(0);if(i=="#")return m(b.substr(1));else if(i=="."){var n=b.substr(1);if(j){for(var f=[],g=0,p=e.length;g<p;g++)f=f.concat(k(n,e[g]));return f}else return k(n)}else if(i=="+")return [a.create(b.substr(1))];else if(j){for(var f=[],g=0,p=e.length;g<p;g++)f=f.concat(l(b,e[g]));return f}else return l(b)}else if(o.is("redjs"))return b.ns;else return c(b)}(function(){var c=0,b="data___"+e;function d(d){d[b]=c++;a.dataCache[d[b]]={}}function f(c,f,g){if(c){var e=c[b];if(arguments.length==2){if(e!==undefined)return a.dataCache[e][f];return undefined}else if(arguments.length===3)if(g===null)delete a.dataCache[e][f];else{e===undefined&&d(c);a.dataCache[c[b]][f]=g;return g}}}a.data=f;a.dataCache={};a.extend({data:function(b,c){if(b!==undefined&&b!=="")if(arguments.length==2)this.ns.forEach(function(d){a.data(d,b,c)});else if(this.ns[0])return a.data(this.ns[0],b);return this}})})();(function(){var d=Array.prototype.slice,f={exec:function(b){this.calls++;var a=arguments;this.list.forEach(function(c){c.apply(b,d.call(a,1))});return this},add:function(a){a.call&&this.list.push(a);return this},del:function(b,c){var a=this.list.indexOf(b);if(c)while(~a){this.list.del(a);a=this.list.indexOf(b)}else this.list.del(a);return this}},e={resolve:function(a){if(this.status==-1){this.status=1;this.context=a;this.arg=d.call(arguments,1);this.successList.exec.apply(this.successList,arguments);this.anywayList.exec.apply(this.anywayList,arguments)}},reject:function(a){if(this.status==-1){this.status=0;this.context=a;this.arg=d.call(arguments,1);this.errorList.exec.apply(this.errorList,arguments);this.anywayList.exec.apply(this.anywayList,arguments)}},success:function(a){if(this.status==-1)this.successList.add(a);else this.status===1&&a.apply(this.context,this.arg);return this},error:function(a){if(this.status==-1)this.errorList.add(a);else this.status===0&&a.apply(this.context,this.arg);return this},anyway:function(a){if(this.status==-1)this.anywayList.add(a);else this.status===0&&a.apply(this.context,this.arg);return this}};function b(){this.calls=0;this.list=[]}function c(){this.status=-1;this.errorList=new b;this.successList=new b;this.anywayList=new b}b.prototype=f;c.prototype=e;a.funcList=function(){return new b};a.deferred=function(){return new c};a.when=function(){for(var a=new c,d=arguments,e=d.length,f=0,g=false,b=0;b<e;b++)d[b]instanceof c&&d[b].success(function(){if(++f==e)if(g)a.reject();else a.resolve()}).error(function(){g=true;++f==e&&a.reject()});return a}})();(function(){a.gstyle=function(){if(!b.getComputedStyle)return function(a,b){return a.currentStyle[b]};else return function(a,c){return b.getComputedStyle(a,null)[c]}}();var c={"float":function(){if(f)return function(b,c){if(c===undefined)return a.gstyle(b,"styleFloat");else b.style.styleFloat=c};else return function(b,c){if(c===undefined)return a.gstyle(b,"float")||a.gstyle(b,"cssFloat");else b.style.cssFloat=c}}(),opacity:function(){if(f)return function(b,c){if(c===undefined){var d=a.gstyle(b,"filter");if(d.charAt(0)=="a")return (d.match(/\d+/)[0]/100).toFloat();else return 1}else b.style.filter="alpha(Opacity="+c*100+")"};else return function(b,c){if(c===undefined)return a.gstyle(b,"opacity").toFloat();else b.style.opacity=c}}()};a.css=function(e,b,f){var g=d(b);if(g.is("string"))if(b in c)return c[b](e,f);else if(f===undefined)return a.gstyle(e,b);else e.style[b]=f;else if(g.is("object"))for(var h in b)a.css(e,h,b[h])};a.height=function(b,h,g,f){var e=h?b.offsetHeight:a.gstyle(b,e).toInt();if(g){var d=a.css(b,"borderTopWidth"),c=a.css(b,"borderBottomWidth");d=isNaN(d)?0:d.toInt();c=isNaN(c)?0:c.toInt();e+=d+c}f=f?a.gstyle(b,"marginTop").toInt()+a.gstyle(b,"marginBottom").toInt():0;return e+f+g};a.extend({css:function(b,c){if(c!==undefined||b instanceof Object)this.ns.forEach(function(d){a.css(d,b,c)});else if(this.ns[0])return a.css(this.ns[0],b);return this},height:function(b,c,d){if(this.ns[0])return a.height(this.ns[0],b,c,d)}})})();(function(){var f={node:true},e=[1];function d(b){var a={};b=b.split(/(?=[#.])/).forEach(function(b){var c=b.charAt(0);if(c==="#")a.id=b.substr(1);else if(c===".")a.className=b.substr(1);else if(b.length)a.tagName=b.toUpperCase()});return a}function b(c){var b=a.create("div");b.innerHTML=c;return b.childNodes}a.create=function(d,a){var b=g.createElement(d);if(a)for(var c in a)b.setAttribute(c,a[c]);return b};a.wrap=function(c,b,d){if(b.hasWord)b=a.create(b,d);c.parentNode.insertBefore(b,c);b.appendChild(c)};a.wrapInner=function(c,b,e){if(b.hasWord)b=a.create(b,e);for(var d=c.childNodes;d[0];b.appendChild(d[0]));c.appendChild(b)};a.children=function(j,c,b){c=d(c||"");b=b||e;var f=j.childNodes,h=[];a:for(var a=0,l=f.length;a<l;a++){for(var g=0,k=b.length;g<k;g++)if(f[a].nodeType!==b[g])continue a;for(var i in c)if(f[a][i]!==c[i])continue a;h.push(f[a])}return h};a.clone=function(d,f){var c=d.cloneNode(f);a.event.copyEvents(c,d);if(f)for(var g=a.tag("*",c),e=a.tag("*",d),b=0,h=e.length;b<h;b++)a.event.copyEvents(g[b],e[b]);return c};a.remove=function(a){a.parentNode.removeChild(a)};a.before=function(a,d){var e=[];if(typeof a==="string")a=b(a);a=c(a);a.forEach(function(a){e.push(a);d.parentNode.insertBefore(a,d)});return e};a.append=function(a,e){var d=[];if(typeof a==="string")a=b(a);a=c(a);a.forEach(function(a){d.push(a);e.appendChild(a)});return d};a.firstChild=function(c,b){if(b===undefined){b=c.firstChild;while(b.nodeType!==1&&b.nextSibling)b=b.nextSibling;if(b.nodeType===1)return b;return undefined}else{if(typeof b=="string")b=a.create(b);c.insertBefore(b,c.firstChild);return b}};a.getNodeText=function(a){return a.text||a.textContent||""};a.addClass=function(a,b){if(!a.className.hasWord(b))if(!a.className)a.className=b;else a.className+=" "+b};a.delClass=function(a,b){a.className=a.className.replace(new RegExp("[ ]*\\b"+b+"\\b"),"")};a.hasClass=function(b,a){return b.className.hasWord(a)};a.toggleClass=function(c,b){if(c.className.hasWord(b)){a.delClass(c,b);return false}else{a.addClass(c,b);return true}};a.extend({children:function(c){var b=a();this.ns.forEach(function(d){b.include(a.children(d,c))});return b},parent:function(){var b=a();this.ns.forEach(function(a){b.include(a.parentNode)});return b},firstChild:function(c){var b=a();if(c===undefined){this.ns.forEach(function(c){b.include(a.firstChild(c))});return b}else{this.each(function(d){b.include(a.firstChild(d,c))});return b}},clone:function(c){var b=a();this.ns.forEach(function(d){b.include(a.clone(d,c))});return b},wrap:function(b){this.ns.forEach(function(c){a.wrap(c,b)});return this},remove:function(){this.ns.forEach(function(b){a.remove(b)});return this},html:function(a){if(a!==undefined)this.ns.forEach(function(b){b.innerHTML=a});else if(this.ns[0])return this.ns[0].innerHTML;return this},append:function(b){if(this.ns[0])return a(a.append(b,this.ns[0]).filter(function(a){return a.nodeType===1}));return this},appendTo:function(b){a.append(this.ns,b);return this},before:function(){if(this.ns[0])return a(a.before(node,this.ns[0]).filter(function(a){return a.nodeType===1}))},beforeTo:function(b){a.before(this.ns,b);return this},attr:function(a,b){if(arguments.length===2)this.ns.forEach(function(c){c.setAttribute(a,b)});else if(this.ns[0])return this.ns[0].getAttribute(a);return this},addClass:function(b){this.ns.forEach(function(c){a.addClass(c,b)});return this},toggleClass:function(b){this.ns.forEach(function(c){a.toggleClass(c,b)});return this},delClass:function(b){this.ns.forEach(function(c){a.delClass(c,b)});return this},hasClass:function(b){if(this.ns[0])return a.hasClass(this.ns[0],b);else return false}})})();(function(){var c=function(){if(b.addEventListener)return function(b,c,a){b.addEventListener(c,a,false)};else return function(b,c,a){b.attachEvent("on"+c,a)}}(),d=function(){if(b.removeEventListener)return function(b,c,a){b.removeEventListener(c,a,false)};else return function(b,c,a){b.detachEvent("on"+c,a)}}(),h=function(){if(!f)return function(a){return a};else return function(){var a=b.event,c=document.documentElement,d=document.body;a.target=a.srcElement;a.relaredTarget=a.target==a.fromElemet?a.toElement:a.fromElement;a.stopPropagation=k;a.charCode=a.keyCode;a.preventDefault=l;a.pageX=a.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c.clientLeft||0);a.pageY=a.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c.clientTop||0);return a}}(),m={"set":function(a,b,c){if(this.events[a]===undefined)this.events[a]=[];if(c)this.events[a].pushOnce(b);else this.events[a].push(b)},unset:function(b,c){var a=this.events[b];if(a===undefined)return 0;a.del(a.indexOf(c));if(a.length===0){delete this.events[b];return 0}return a.length},clear:function(a){delete this.events[a]},call:function(c,a){var b=this.events[a.type];b&&b.forEach(function(b){b.call(c,a)===false&&a.preventDefault()})}};function i(){this.events={}}i.prototype=m;function l(){this.returnValue=false}function k(){this.cancelBubble=true}function j(){var o="event___"+e,k="handler___"+e,j=this,m=["abort","load","unload","click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","focus","blur","change","submit","keypress","keydown","keyup"],n={UIEvents:["DOMFocusIn","DOMFocusOut","DOMActivate"],MouseEvents:["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove"],HTMLEvents:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],KeyboardEvent:["keypress","keydown","keyup"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"]},p=function(){if(f)return function(c,b,d){b=a.joinObj(b,d);if(c)b.type=c;return g.createEventObject(b)};else return function(e,c,g){c=a.joinObj(c,g);var f=s(e,c),d=document.createEvent(f);if(f==="MouseEvents")d.initMouseEvent(e,!c.cancelBubble,!!c.cancelable,b,1,c.sceenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget);else if(f==="UIEvents")d.initUIEvent(e,!c.cancelBubble,!!c.cancelable,b,1);else if(f==="KeyboardEvent")d.initKeyboardEvent(e,!c.cancelBubble,!!c.cancelable,b,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.keyCode,c.charCode);else if(f==="MutationEvent")d.initEvent(e,!c.cancelBubble,!!c.cancelable,c.relatedNode,c.prevValue,c.newValue,c.attrName,c.attrChange);else d.initEvent(e,!c.cancelBubble,!!c.cancelable);return d}}(),q=function(){if(f)return function(b,c,a,d){a=p(c,a,d);try{b.fireEvent("on"+c,a)}catch(e){l(b).call(b,a);!a.cancelBubble&&b.parentNode&&q(b.parentNode,"type",a)}return a};else return function(c,d,a,b){a=p(d,a,b);c.dispatchEvent(a);return a}}();if(a.browser.msie||a.browser.opera){m.push("mouseenter","mouseleave");n.MouseEvents.push("mouseenter","mouseleave")}function s(c,a){if(a&&a.type)c=a.type;for(var b in n)if(~n[b].indexOf(c))return b;return "HTMLEvents"}function l(b){return a.data(b,o)||a.data(b,o,new i)}function r(b,c){a.data(b,o,c)}this.list=m;this.artificial={};this.add=function(a,b,d,e){l(a).set(b,d,e);if(!a[k])a[k]=function(b){l(a).call(a,h(b))};try{c(a,b,a[k])}catch(f){}j.artificial[b]&&j.add(a,j.artificial[b].base,j.artificial[b]["ini"],true)};this.copyEvents=function(b,f){var e=l(f);if(!a.isEmptyObj(e)){r(b,e);b[k]=function(a){l(b).call(b,fixEvente(a))};for(var d in e.events){try{c(b,d,b[k])}catch(g){}j.artificial[d]&&j.add(b,j.artificial[d].base,j.artificial[d]["ini"],true)}}};this.del=function(c,b,f){var e=l(c);if(e.unset(b,f)===0){try{d(c,b,c[k])}catch(g){}if(a.isEmptyObj(e.events))delete c[k];j.artificial[b]&&j.del(c,j.artificial[b].base,j.artificial[b].ini)}};this.clear=function(c,b){var e=l(c);e.clear(b);d(c,b,c[k]);j.artificial[b]&&j.del(c,j.artificial[b].base,j.artificial[b].ini);if(a.isEmptyObj(e.events))delete c[k]};this.create=function(b){if(~m.indexOf(b.name))return;b.condition=b.condition||function(){return true};a.event.artificial[b.name]=a.joinObj({ini:function(c){b.condition.call(this,c)&&a.force(this,b.name,c,{cancelBubble:true})}},b)};this.force=function(b,a,d,c){if(b&&a)return q(b,a,d,c);else throw Error("Not enough arguments")};this.fix=h}a.event=new j;a.force=a.event.force;a.bind=a.event.add;a.unbind=a.event.del;a.addEvent=c;a.delEvent=d;a.extend({bind:function(c,b){this.ns.forEach(function(d){a.bind(d,c,b)});return this},unbind:function(c,b){this.ns.forEach(function(d){a.unbind(d,c,b)});return this},force:function(b){this.ns.forEach(function(c){a.force(c,b)});return this},clearEvent:function(b){this.ns.forEach(function(c){a.event.clear(c,b)});return this}})})();(function(){var d=a.event.list.copy();function e(d,b){return c(a.tag("*",d)).some(function(a){return a===b})}function b(c){var a=c.relatedTarget,b,d=e(this,a);if(a==null)return true;if(!a)return false;b=a!==this&&a.tagName!==g.documentElement&&a.prefix!=="xul"&&!d;!b&&c.stopPropagation();return b}if(!a.browser.msie){a.event.create({name:"mouseenter",base:"mouseover",condition:b});a.event.create({name:"mouseleave",base:"mouseout",condition:b});d.push("mouseenter","mouseleave")}d.forEach(function(c){var b={};b[c]=function(b){this.ns.forEach(function(d){a.event.add(d,c,b)});return this};a.extend(b)})})();a.extend({each:function(b,a){this.ns.forEach(b,a);return this},include:function(){for(var a=0,c=arguments.length;a<c;a++){var b=h(arguments[a]);b.forEach(function(a){!~this.ns.indexOf(a)&&this.ns.push(a)},this);this.length=this.ns.length}return this},exclude:function(){for(var a=0,c=arguments.length;a<c;a++){var b=h(arguments[a]);this.ns=this.ns.filter(function(a){return !~b.indexOf(a)},this);this.length=this.ns.length}return this},eq:function(b){if(this.ns[b])return a(this.ns[b]);return this},first:function(){return this.eq(0)},last:function(){return this.eq(this.length-1)},filter:function(b){if(this.length>0&&b.call){var c=this.ns.filter(function(a){return b.call(a);return true});return a(c)}return this},find:function(b){return a(b,this)}});a.extend({val:function(a){if(a!==undefined){this.ns.forEach(function(b){b.value=a});return this}else if(this.ns[0])return this.ns[0].value}});a.easyModeOn=function(){if(!b._){b._=a;return true}return false};a.easyModeOff=function(){if(b._==a&&b._===j){delete b._;return true}return false};(function(){a.aj={};a.aj.obj=function(){return new XMLHttpRequest};a.aj.settings={type:"post",url:location.href,user:null,password:null,contentType:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",script:"text/javascript",urlencoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data"},accept:"json",interval:150,longReq:6e4,middleReq:3e4};function c(b){if(d(b).is("object")){var a=[];for(var c in b)a.push(c+"="+encodeURIComponent(b[c]));a=a.join("&");return a}return ""}function b(a){if(!(a instanceof Object))this.url=a;else for(var b in a)this[b]=a[b]}b.prototype=a.aj.settings;a.aj.query=function(e,f){e=new b(e);var g=a.deferred(),h,i;f=f||a.aj.obj();function k(){if(f.readyState==4&&f.status==200){clearInterval(i);clearInterval(h);var a=e.accept=="xml"?f.responseXML:f.responseText;g.resolve(e.context,a)}}e.before instanceof Function&&e.before();if(d(e.timeout).is("number"))i=setTimeout(function(){clearInterval(h);g.reject(e.context,"timeout")},e.timeout);h=setInterval(k,e.interval);var j=a.aj.settings.contentType[e.accept];if(e.type=="post"){f.open("post",e.url,true);f.setRequestHeader("Content-Type",a.aj.settings.contentType.urlencoded);f.setRequestHeader("Accept",j);f.send(c(e.data))}else{f.open("get",e.url+"?"+c(e.data),true);f.setRequestHeader("Accept",j);f.send(null)}g.error(function(){f.abort()});return g};a.getScript=function(d,c){var b=a.aj.query({url:d,accept:"script"});!c&&b.success(function(b,a){eval.call(a,b)});return b}})();(function(){var c=16,f={linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+.5}},d="animation___"+e;function b(c,e,f){var b=a.data(c,d)||a.data(c,d,{});if(f!==undefined){b[e]=f;return}return b[e]}a.animate=function(d,g,h,u,p,s){function o(){var l=Date.now()-t,e=l/u,f=((h-i)*r(e)+i).limit(i,h);a.css(d,g,f+j);if(e<1)d[k]=setTimeout(o,c);else{a.css(d,g,h);b(d,g,"");p&&p.call(d)}}var m=b(d,g),l=a.css(d,g).toString(),i=g=="opacity"?l.toFloat():l.toInt(),q=i-h,n=q<0?0:1,k="animation_"+g+"___"+e;if(m!==n&&q!==0){m!==undefined&&clearTimeout(d[k]);var j=l.match(/[a-z]+/),r=f[s]||f["swing"],t=Date.now();j=j?j:"";b(d,g,n);d[k]=setTimeout(o,c)}};a.hide=function(b,e,c){if(e)a.animate(b,"opacity",0,e,function(){b.style.display="none";c&&c()});else{if(!b.display){var d=a.gstyle(b,"display");if(d!="none")b.display=d;else b.display="block"}b.style.display="none"}};a.show=function(b,d,c){if(d){if(a.gstyle(b,"display")=="none"){a.css(b,"opacity",0);b.style.display="block"}a.animate(b,"opacity",1,d,function(){c&&c()})}else b.style.display=b.display||"block"};a.extend({hide:function(c,b){this.ns.forEach(function(d){a.hide(d,c,b)});return this},show:function(c,b){this.ns.forEach(function(d){a.show(d,c,b)});return this},animate:function(f,c,e,d,b){this.ns.forEach(function(g){a.animate(g,f,c,e,d,b)});return this}})})();(function(){function b(a){if(a&&(new RegExp("(?:^|;\\s*)"+a+"=([^;]*)")).test(document.cookie))return decodeURIComponent(RegExp.$1)}function c(f,e,c,b){var a=[f+"="+encodeURIComponent(e||"")];c&&a.push("max-age="+c*86400);if(b)for(var d in b)a.push(d+"="+b[d]);document.cookie=a.join("; ")}a.cookie=function(a,d,f,e){if(arguments.length<2)return b(a);else c(a,d,f,e)}})();(function(){a.props=function(c){var a=[];for(var b in c)a.push(b+" = "+c[b]);console.log(a.join("\n"))};a.time=function(a){var b=Date.now();a();return Date.now()-b}})();if(!b._)b._=a;b.redjs=j})(window)